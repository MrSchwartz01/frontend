<template>
    <div>
      <!-- Header con opciÃ³n para ir a la pÃ¡gina principal -->
      <HeaderAnth
        :searchQuery="searchQuery"
        :isAuthenticated="isAuthenticated"
        @buscar="buscarProductos"
        @cerrar-sesion="cerrarSesion"
      />
  
      <!-- Contenedor de inicio de sesiÃ³n -->
      <div class="login-container">
        <h2>Iniciar SesiÃ³n</h2>
        
        <!-- Mensaje de error general -->
        <div v-if="error" class="error-message-box">
          {{ error }}
        </div>
        
        <form @submit.prevent="login">
          <div class="input-group">
            <label for="nombre_usuario">Nombre de usuario *</label>
            <input
              v-model="nombre_usuario"
              id="nombre_usuario"
              type="text"
              placeholder="Nombre de usuario"
              required
              @input="clearError('nombre_usuario')"
            />
            <p v-if="errors.nombre_usuario" class="error">{{ errors.nombre_usuario }}</p>
          </div>
  
          <div class="input-group">
            <label for="contraseÃ±a">ContraseÃ±a *</label>
            <div class="password-container">
              <input
                v-model="contraseÃ±a"
                id="contraseÃ±a"
                :type="passwordVisible ? 'text' : 'password'"
                placeholder="ContraseÃ±a"
                required
                @input="clearError('contraseÃ±a')"
              />
              <span class="toggle-password" @click="togglePasswordVisibility">
                {{ passwordVisible ? 'ğŸ‘ï¸' : 'ğŸ™ˆ' }}
              </span>
            </div>
            <p v-if="errors.contraseÃ±a" class="error">{{ errors.contraseÃ±a }}</p>
          </div>
  
          <button type="submit" class="login-button">Iniciar sesiÃ³n</button>
          
          <div class="forgot-password-container">
            <router-link to="/olvide-password" class="forgot-password-link">
              Â¿Olvidaste tu contraseÃ±a?
            </router-link>
          </div>

          <p class="account-info">
            Â¿No tiene una cuenta? 
            <button class="create-account-link" @click="goToRegister">
              RegÃ­strese aquÃ­
            </button>
          </p>
        </form>
      </div>
    </div>
  </template>
  <script src="./SesionUsuario.js"></script>
  <style src="./SesionUsuario.css"></style>